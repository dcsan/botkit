! local concat = newline

// this should be included in all scripts
// if you have another include then include this from that... hierarchy is supported by RS

> topic global_commands inherits admin

  + reset{weight=20}
  - resetting!
  ^ {topic=random}{@start}
  ^ helpFlag: true

  + teacher{weight=20}
  - Coming!
  ^ helpFlag: true
  ^ who: teacher1
  ^ <set prevtopic=<get topic>>
  ^ {topic=teacher}
  ^ goto: start

  + (help|帮助)
  - Here are some things you can type:
  ^ menu - list of features
  ^ lessons - list of lessons
  ^ score - track your progress
  ^ teacher - call your teacher
  ^ helpFlag: true
  ^ who: hint

  //// keep here so help doesn't break a lesson flow
  //- {topic=help}{@start}

  + lessons{weight=10}
  - We have some new lessons for you! {topic=lessons}
  ^ goto: start
  ^ who: teacher1

  + quiz
  - QuizTime!
  ^ {topic=quizmenu}{@start}

  + blog
  - BLOG
  ^ 🚧正在施工🚧
  ^ under construction

  + faq
  - FAQ
  ^ 🚧正在施工🚧
  ^ under construction

  + riveexplain *
  - title: 👉 <star>
  ^ type: card
  ^ url: #APPDOMAIN/explain/<star>

  // if you type explain with no keyword, get this help statement
  + explain
  - I can explain words and grammar to you. What do you want to know about? eg:
  ^ 👉 explain should
  ^ who: hint

  + greeting
  - {topic=greeting}{@start}

  + subscribe{weight=20}
  - {topic=onboarding}{@start}

  + mainmenu{weight=20}
  - 🏁 Main menu options 🏁
  ^ {topic=mainmenu}
  ^ goto: start

  + (whats new|whatsnew){weight=10}
  - New arrivals! {topic=whatsnew}{@start}

  + test
  - 🚀 all systems go!

  + echo *
  - you said <star>

  + testing{weight=20}
  - testing...
  ^ {topic=testing}{@start}

  + testloop
  - {topic=testloop}{@start}

  + dontunderstand
  - sorry, what?
  - er, I don't understand.
  - hmm, can you say that again?
  - err, what?

< topic


// had to break into a separate topic as `gotopic *` was too low priority
> topic gotopic inherits global_commands

  + start
  - what topic do you want to go to?

  + *
  - going to topic <star>
  ^ {topic=<star>}{@start}

< topic
